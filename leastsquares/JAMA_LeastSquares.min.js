"use strict";var LeastSquares=function(){function i(t,e){t.length!=e.length&&console.log("arrays must be the same length"),this.x=t,this.y=e}return i.prototype.line=function(){for(var t=[],e=[],r=0;r<this.x.length;r++)t[r]=[],e[r]=[],e[r][0]=this.y[r],t[r][0]=this.x[r],t[r][1]=1;return t=new Matrix(t),e=new Matrix(e),t.solve(e)},i.prototype.parab=function(){for(var t=[],e=[],r=0;r<this.x.length;r++)t[r]=[],e[r]=[],e[r][0]=this.y[r],t[r][2]=1,t[r][1]=this.x[r],t[r][0]=this.x[r]*t[r][1];return t=new Matrix(t),e=new Matrix(e),t.solve(e)},i.prototype.poly=function(t){for(var e=[],r=[],i=0;i<this.x.length;i++){e[i]=[],r[i]=[],r[i][0]=this.y[i];for(var s=t-(e[i][t]=1);0<=s;s--)e[i][s]=this.x[i]*e[i][s+1]}return e=new Matrix(e),r=new Matrix(r),e.solve(r)},i.prototype.log=function(){for(var t=[],e=[],r=0;r<this.x.length;r++)t[r]=[],e[r]=[],e[r][0]=this.y[r],t[r][0]=Math.log(this.x[r]),t[r][1]=1;return t=new Matrix(t),e=new Matrix(e),t.solve(e)},i.prototype.pow=function(){},i.prototype.exp=function(){},i.prototype.sinLinFreq=function(t,e=1){for(var r=[],i=[],s=0;s<this.x.length;s++){r[s]=[],i[s]=[],i[s][0]=this.y[s];for(var n=e,o=t-(r[s][t]=1);0<=o;o--)r[s][o]=Math.sin(this.x[s]*n),n+=1}return r=new Matrix(r),i=new Matrix(i),r.solve(i)},i.prototype.cosLinFreq=function(t,e=1){for(var r=[],i=[],s=0;s<this.x.length;s++){r[s]=[],i[s]=[],i[s][0]=this.y[s];for(var n=e,o=t-(r[s][t]=1);0<=o;o--)r[s][o]=Math.cos(this.x[s]*n),n+=1}return r=new Matrix(r),i=new Matrix(i),r.solve(i)},i.prototype.sinCosLinFreq=function(t,e=1){for(var r=[],i=[],s=0;s<this.x.length;s++){r[s]=[],i[s]=[],i[s][0]=this.y[s];for(var n=e,o=2*t-(r[s][2*t]=1);0<=o;o-=2)r[s][o]=Math.sin(this.x[s]*n),r[s][o-1]=Math.cos(this.x[s]*n),n+=1}return r=new Matrix(r),i=new Matrix(i),r.solve(i)},i.prototype.sinExpFreq=function(t,e=1,r=2){for(var i=[],s=[],n=0;n<this.x.length;n++){i[n]=[],s[n]=[],s[n][0]=this.y[n];for(var o=e,l=t-(i[n][t]=1);0<=l;l--)i[n][l]=Math.sin(this.x[n]*o),o*=r}return i=new Matrix(i),s=new Matrix(s),i.solve(s)},i.prototype.cosExpFreq=function(t,e=1,r=2){for(var i=[],s=[],n=0;n<this.x.length;n++){i[n]=[],s[n]=[],s[n][0]=this.y[n];for(var o=e,l=t-(i[n][t]=1);0<=l;l--)i[n][l]=Math.cos(this.x[n]*o),o*=r}return i=new Matrix(i),s=new Matrix(s),i.solve(s)},i.prototype.sinCosExpFreq=function(t,e=1,r=2){for(var i=[],s=[],n=0;n<this.x.length;n++){i[n]=[],s[n]=[],s[n][0]=this.y[n];for(var o=e,l=2*t-(i[n][2*t]=1);0<=l;l-=2)i[n][l]=Math.sin(this.x[n]*o),i[n][l-1]=Math.cos(this.x[n]*o),o*=r}return i=new Matrix(i),s=new Matrix(s),i.solve(s)},i.prototype.ellipse=function(){},i.prototype.ellipseGen=function(t=-1,e=5){return 0==e?this.ellipseGenA(t):1==e?this.ellipseGenB(t):2==e?this.ellipseGenC(t):3==e?this.ellipseGenD(t):4==e?this.ellipseGenE(t):this.ellipseGenF(t)},i.prototype.ellipseGenA=function(t=-1){for(var e=[],r=[],i=0;i<this.x.length;i++)e[i]=[],r[i]=[],e[i][4]=1,e[i][3]=this.y[i],e[i][2]=this.x[i],e[i][1]=this.y[i]*this.y[i],e[i][0]=this.x[i]*this.y[i],r[i][0]=-this.x[i]*this.x[i];e=new Matrix(e),r=new Matrix(r);var s=e.solve(r),n=[];n[0]=[];for(i=n[0][0]=1;i<6;i++)n[i]=[],n[i][0]=s.A[i-1][0];return this.returnEllipse(n,t)},i.prototype.ellipseGenB=function(t=-1){for(var e=[],r=[],i=0;i<this.x.length;i++)e[i]=[],r[i]=[],e[i][4]=1,e[i][3]=this.y[i],e[i][2]=this.x[i],e[i][1]=this.y[i]*this.y[i],e[i][0]=this.x[i]*this.x[i],r[i][0]=-this.x[i]*this.y[i];e=new Matrix(e),r=new Matrix(r);for(var s=e.solve(r),n=[],i=0;i<5;i++)0==i?(n[i]=[],n[i][0]=s.A[i][0]):(n[i+1]=[],n[i+1][0]=s.A[i][0]);return n[1]=[],n[1][0]=1,this.returnEllipse(n,t)},i.prototype.ellipseGenC=function(t=-1){for(var e=[],r=[],i=0;i<this.x.length;i++)e[i]=[],r[i]=[],e[i][4]=1,e[i][3]=this.y[i],e[i][2]=this.x[i],e[i][1]=this.x[i]*this.y[i],e[i][0]=this.x[i]*this.x[i],r[i][0]=-this.y[i]*this.y[i];e=new Matrix(e),r=new Matrix(r);for(var s=e.solve(r),n=[],i=0;i<5;i++)i<=1?(n[i]=[],n[i][0]=s.A[i][0]):(n[i+1]=[],n[i+1][0]=s.A[i][0]);return n[2]=[],n[2][0]=1,this.returnEllipse(n,t)},i.prototype.ellipseGenD=function(t=-1){for(var e=[],r=[],i=0;i<this.x.length;i++)e[i]=[],r[i]=[],e[i][4]=1,e[i][3]=this.y[i],e[i][2]=this.y[i]*this.y[i],e[i][1]=this.x[i]*this.y[i],e[i][0]=this.x[i]*this.x[i],r[i][0]=-this.x[i];e=new Matrix(e),r=new Matrix(r);for(var s=e.solve(r),n=[],i=0;i<5;i++)i<=2?(n[i]=[],n[i][0]=s.A[i][0]):(n[i+1]=[],n[i+1][0]=s.A[i][0]);return n[3]=[],n[3][0]=1,this.returnEllipse(n,t)},i.prototype.ellipseGenE=function(t=-1){for(var e=[],r=[],i=0;i<this.x.length;i++)e[i]=[],r[i]=[],e[i][4]=1,e[i][3]=this.x[i],e[i][2]=this.y[i]*this.y[i],e[i][1]=this.x[i]*this.y[i],e[i][0]=this.x[i]*this.x[i],r[i][0]=-this.y[i];e=new Matrix(e),r=new Matrix(r);for(var s=e.solve(r),n=[],i=0;i<5;i++)i<=3?(n[i]=[],n[i][0]=s.A[i][0]):(n[i+1]=[],n[i+1][0]=s.A[i][0]);return n[4]=[],n[4][0]=1,this.returnEllipse(n,t)},i.prototype.ellipseGenF=function(t=-1){for(var e=[],r=[],i=0;i<this.x.length;i++)e[i]=[],r[i]=[],r[i][0]=-1,e[i][4]=this.y[i],e[i][3]=this.x[i],e[i][2]=this.y[i]*e[i][4],e[i][1]=this.x[i]*this.y[i],e[i][0]=this.x[i]*e[i][3];e=new Matrix(e),r=new Matrix(r);for(var s=e.solve(r),n=[],i=0;i<5;i++)n[i]=[],n[i][0]=s.A[i][0];return n[5]=[],n[5][0]=1,this.returnEllipse(n,t)},i.prototype.returnEllipse=function(t,e=-1){var r=t[0][0],i=t[1][0],s=t[2][0],n=t[3][0],o=t[4][0],l=i*i,a=r-s,h=r+s,p=s*n,x=i*n,c=i*o,y=r*o,f=l-4*r*s,n=2*((y-x)*o+s*n*n+f*t[5][0]),a=Math.sqrt(a*a+l),l=-Math.sqrt(n*(h+a))/f,h=-Math.sqrt(n*(h-a))/f,c=(2*p-c)/f,x=(2*y-x)/f,f=0,f=0==i?s<r?0:Math.PI:Math.atan(1/i*(s-r-a));return-1!=e&&(e.x_c=c,e.y_c=x,e.a_r=l,e.b_r=h,e.theta=f),new Matrix(t)},i.runLeastSquaresTest=function(){var t=[.083488725,.972233795,.519432488,.557793421,.300510972,.529587317,.288370293,.295974099,.972950908,.562190618,.485386043,.187655207,.173117839,.401618916,.510703949,.834813425,.913974888,.358703401,.037429811,.809497463,.285912045,.153523603,.966634609,.529821905,.592251179,.710151685,.611030014,.137094865,.619995355,.185711451],e=[.154093159,.560237285,.301702746,.233999395,.319387128,.912314852,.055485191,.131389179,.584452711,.121399731,.478089423,.527552888,.30823643,.401301559,.39393612,.057959329,.429895272,.212793677,.058030451,.128383908,.069685073,.588424668,.129995286,.895030989,.310668533,.286987422,.714797546,.238023745,.842531267,.710897663],r=new i(t,e);console.log("x data"),console.log(t),console.log("y data"),console.log(e),console.log("line fit"),(t=r.line()).print(5,3),console.log("parabola fit"),(t=r.parab()).print(5,3),console.log("5th degree poly fit"),(t=r.poly(5)).print(5,3),console.log("8th degree poly fit"),(t=r.poly(8)).print(5,3),console.log("3rd degree exp freq sin fit (10Hz start freq)"),(t=r.sinExpFreq(3,10,2)).print(5,3),console.log("3rd degree exp freq cos fit (10Hz start freq)"),(t=r.cosExpFreq(3,10,2)).print(5,3),console.log("3rd degree exp freq sin-cos fit (10Hz start freq)"),(t=r.sinCosExpFreq(3,10,2)).print(5,3);e=[-4,-3,-2,-1,0,1,2,3,4],r=[-1,0,-1.5,.5,1,-1,-.5,2,-1];console.log("x data"),console.log(e),console.log("y data"),console.log(r);e=new i(e,r);console.log("3rd degree linear freq sin fit"),(t=e.sinLinFreq(3)).print(5,3),console.log("3rd degree linear freq cos fit"),(t=e.cosLinFreq(3)).print(5,3),console.log("3rd degree linear freq sin-cos fit"),(t=e.sinCosLinFreq(3)).print(5,3),console.log("Elliptical Fits");r=new i(xElp,yElp);console.log("Ellipse with default, no return parameters (only Ax2+Bxy+Cy2+Dx+Ey+F matrix)"),(t=r.ellipseGen()).print(5,3);e={},t=r.ellipseGen(e,0);console.log("Ellipse parameters (x2 as dependent var)"),console.log("x_c: "+e.x_c+" y_c: "+e.y_c+" a_r: "+e.a_r+" b_r: "+e.b_r+" theta: "+e.theta),t.print(5,3),e={},t=r.ellipseGen(e,1),console.log("Ellipse parameters (xy as dependent var)"),console.log("x_c: "+e.x_c+" y_c: "+e.y_c+" a_r: "+e.a_r+" b_r: "+e.b_r+" theta: "+e.theta),t.print(5,3),e={},t=r.ellipseGen(e,2),console.log("Ellipse parameters (y2 as dependent var)"),console.log("x_c: "+e.x_c+" y_c: "+e.y_c+" a_r: "+e.a_r+" b_r: "+e.b_r+" theta: "+e.theta),t.print(5,3),e={},t=r.ellipseGen(e,3),console.log("Ellipse parameters (x as dependent var)"),console.log("x_c: "+e.x_c+" y_c: "+e.y_c+" a_r: "+e.a_r+" b_r: "+e.b_r+" theta: "+e.theta),t.print(5,3),e={},t=r.ellipseGen(e,4),console.log("Ellipse parameters (y as dependent var)"),console.log("x_c: "+e.x_c+" y_c: "+e.y_c+" a_r: "+e.a_r+" b_r: "+e.b_r+" theta: "+e.theta),t.print(5,3),e={},t=r.ellipseGen(e,5),console.log("Ellipse parameters (Const as dependent var)"),console.log("x_c: "+e.x_c+" y_c: "+e.y_c+" a_r: "+e.a_r+" b_r: "+e.b_r+" theta: "+e.theta),t.print(5,3)},i}();Matrix.__class="LeastSquares",Matrix.__interfaces=["java.lang.Cloneable","java.io.Serializable"];